<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Neon Space: Overdrive</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html, body {
    margin: 0;
    padding: 0;
    background: radial-gradient(#050010, #000);
    overflow: hidden;
    font-family: Arial, sans-serif;
}
#ui {
    position: fixed;
    top: 15px;
    left: 15px;
    color: #0ff;
    font-size: 20px;
    z-index: 10;
}
#gameOver {
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    background: rgba(0,0,0,.85);
    color: white;
    font-size: 36px;
}
button {
    margin-top: 20px;
    padding: 12px 26px;
    font-size: 18px;
    background: #0ff;
    border: none;
    cursor: pointer;
}
</style>
</head>
<body>

<canvas id="c"></canvas>
<div id="ui">Score: <span id="score">0</span></div>
<div id="gameOver">
    <div>GAME OVER</div>
    <button onclick="restart()">Restart</button>
</div>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");
resize();
window.addEventListener("resize", resize);

function resize() {
    canvas.width = innerWidth;
    canvas.height = innerHeight;
}

let score = 0;
let running = true;
let shake = 0;

const player = {
    x: canvas.width / 2,
    y: canvas.height * 0.8,
    tx: canvas.width / 2,
    ty: canvas.height * 0.8,
    r: 18
};

const bullets = [];
const enemies = [];
const particles = [];

const stars = [...Array(300)].map(() => ({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    z: Math.random() * 3 + 1
}));

canvas.addEventListener("mousemove", e => {
    player.tx = e.clientX;
    player.ty = e.clientY;
});

canvas.addEventListener("touchmove", e => {
    const t = e.touches[0];
    player.tx = t.clientX;
    player.ty = t.clientY;
});

setInterval(() => {
    if (running) bullets.push({ x: player.x, y: player.y });
}, 150);

setInterval(() => {
    enemies.push({
        x: Math.random() * canvas.width,
        y: -50,
        r: 22,
        s: 2 + Math.random() * 2
    });
}, 700);

function explode(x, y, color) {
    for (let i = 0; i < 25; i++) {
        particles.push({
            x, y,
            vx: (Math.random() - .5) * 6,
            vy: (Math.random() - .5) * 6,
            life: 30,
            color
        });
    }
}

function loop() {
    if (!running) return;

    ctx.setTransform(1,0,0,1,
        (Math.random()-.5)*shake,
        (Math.random()-.5)*shake
    );
    shake *= .9;

    ctx.fillStyle = "rgba(0,0,0,.35)";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // Stars (parallax)
    stars.forEach(s => {
        s.y += s.z;
        if (s.y > canvas.height) s.y = 0;
        ctx.fillStyle = `rgba(255,255,255,${s.z/3})`;
        ctx.fillRect(s.x, s.y, s.z, s.z);
    });

    // Smooth player movement
    player.x += (player.tx - player.x) * 0.15;
    player.y += (player.ty - player.y) * 0.15;

    // Thruster
    ctx.beginPath();
    ctx.arc(player.x, player.y + 22, 10, 0, Math.PI*2);
    ctx.fillStyle = "#0ff";
    ctx.shadowBlur = 25;
    ctx.shadowColor = "#0ff";
    ctx.fill();

    // Player
    ctx.beginPath();
    ctx.arc(player.x, player.y, player.r, 0, Math.PI*2);
    ctx.fillStyle = "#00ffff";
    ctx.shadowBlur = 40;
    ctx.fill();
    ctx.shadowBlur = 0;

    // Bullets
    bullets.forEach((b,i) => {
        b.y -= 14;
        ctx.fillStyle = "#ff00ff";
        ctx.fillRect(b.x-2, b.y, 4, 12);
        if (b.y < 0) bullets.splice(i,1);
    });

    // Enemies
    enemies.forEach((e,ei) => {
        e.y += e.s;
        ctx.beginPath();
        ctx.arc(e.x, e.y, e.r, 0, Math.PI*2);
        ctx.fillStyle = "#ff0033";
        ctx.shadowColor = "#ff0033";
        ctx.shadowBlur = 30;
        ctx.fill();
        ctx.shadowBlur = 0;

        if (Math.hypot(e.x-player.x, e.y-player.y) < e.r+player.r) {
            explode(player.x, player.y, "#f00");
            shake = 20;
            end();
        }

        bullets.forEach((b,bi) => {
            if (Math.hypot(e.x-b.x, e.y-b.y) < e.r) {
                explode(e.x, e.y, "#f0f");
                shake = 10;
                enemies.splice(ei,1);
                bullets.splice(bi,1);
                score++;
                document.getElementById("score").innerText = score;
            }
        });

        if (e.y > canvas.height+50) enemies.splice(ei,1);
    });

    // Particles
    particles.forEach((p,pi) => {
        p.x += p.vx;
        p.y += p.vy;
        p.life--;
        ctx.fillStyle = p.color;
        ctx.fillRect(p.x, p.y, 3, 3);
        if (p.life <= 0) particles.splice(pi,1);
    });

    requestAnimationFrame(loop);
}

function end() {
    running = false;
    document.getElementById("gameOver").style.display = "flex";
}

function restart() {
    enemies.length = bullets.length = particles.length = 0;
    score = 0;
    running = true;
    document.getElementById("score").innerText = score;
    document.getElementById("gameOver").style.display = "none";
    loop();
}

loop();
</script>
</body>
</html>